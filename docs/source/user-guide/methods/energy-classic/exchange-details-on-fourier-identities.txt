Due to the periodicity of the crystal lattice, the sum over :math:`r_m` will not
change if we shift all the vectors :math:`r_m` by any lattice vector
:math:`\boldsymbol{r}_0 = \sum_{i}\boldsymbol{a}_in_i`

.. math::
    \sum_{\boldsymbol{r}_m} e^{\pm i\boldsymbol{q}\boldsymbol{r}_m}
    =
    \sum_{\boldsymbol{r}_m} e^{\pm i\boldsymbol{q}(\boldsymbol{r}_m + \boldsymbol{r}_0)}
    =
    e^{\pm i\boldsymbol{q}\boldsymbol{r}_0} \sum_{\boldsymbol{r}_m} e^{\pm i\boldsymbol{q}\boldsymbol{r}_m}

This equation leads to the conclusions that either the sum is zero, or
:math:`\pm\boldsymbol{q}\boldsymbol{r}_0 = 2\pi n` for any :math:`\boldsymbol{r}_0`.
Second conclusion defines the value of the sum, where :math:`M`
is the number of lattice vectors:

.. math::
    \sum_{r_m}e^{\pm i\boldsymbol{q}\boldsymbol{r}_m} = M

Both conclusion together provide allowed values of the :math:`\boldsymbol{q}` vector,
because the sum can not be zero:

.. math::
    \sum_{i=1}^{3}q_{a_i}a_in_i = 2\pi n,  \forall n_1, n_2, n_3 \in \mathbb{Z}

where we projected the :math:`\boldsymbol{q}` vector on the three lattice vectors
:math:`\boldsymbol{a}_1`, :math:`\boldsymbol{a}_2`, :math:`\boldsymbol{a}_3`; :math:`n \in \mathbb{Z}`
One can rewrite the condition above in a form:

.. math::
    q_{a_i} = \dfrac{2\pi}{a_i}n_i,  i = 1, 2, 3

where :math:`n_i \in \mathbb{Z}`.

It is evident that the :math:`\boldsymbol{q}` shall be a reciprocal lattice vector,
which we denote as :math:`\boldsymbol{G} = \sum_{i}\boldsymbol{b}_in_i`. We
denote this condition on the :math:`\boldsymbol{q}` vector as :math:`\delta_{\boldsymbol{q},\boldsymbol{G}}`
and write the sum in a form:

.. math::
    \sum_{r_m}e^{\pm i\boldsymbol{q}\boldsymbol{r}_m} = M\delta_{\boldsymbol{q},\boldsymbol{G}}

In the case of the sum with :math:`2\boldsymbol{q}\boldsymbol{r}_m` under the exponent
the argument is the same, but the final condition differs:

.. math::
    q_{a_i} = \dfrac{\pi}{a_i}n_i,  i = 1, 2, 3

In the second case spiral vector can be written with the reciprocal lattice vector as:

.. math::
  \boldsymbol{q} = \dfrac{\boldsymbol{G}}{2} = \sum_{i}\dfrac{\boldsymbol{b}_i}{2}n_i

We denote this condition on the :math:`\boldsymbol{q}` vector as
:math:`\delta_{\boldsymbol{q},\frac{\boldsymbol{G}}{2}}` and write the sum in a form:

.. math::
    \sum_{r_m}e^{\pm 2i\boldsymbol{q}\boldsymbol{r}_m} = M\delta_{\boldsymbol{q},\frac{\boldsymbol{G}}{2}}


.. [1] Ashcroft, Neil W., and N. David Mermin.
       Solid state physics. Cengage Learning, 2022.
