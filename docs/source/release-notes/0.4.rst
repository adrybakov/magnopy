.. _release-notes_0.4:

***********
Version 0.4
***********

0.4.2
=====

**Date**: Undefined

Bugfix
------

* Fix a rare bug with p21 parameter in the dispersion calculation.


0.4.1
=====

**Date**: 3 November 2025

Bugfix
------

* Fix :issue:`80`: a bug in ``magnopy-lswt`` when using ``--k-points`` argument.


0.4.0
=====

**Date**: 23 October 2025

.. warning::

    We do not recommend to use ``magnopy-lswt`` script with ``--k-points`` argument
    of this version. There is a bug that was fixed in 0.4.1.

.. important::

    Together with this release we release a master tutorial about magnopy:
    |magnopy-tutorials|_. You can take it as a starting point to learn how to use
    magnopy.

Bugfix
------

* Fix :issue:`74`: a bug in ``magnopy-lswt``, when it is used with ``--k-points`` argument.
* Fix a bug in ``magnopy.examples.ivuzjo``: J=10 was fixed, now input value is used.

New features
------------

* Major improvement of the console output for both ``magnopy-lswt`` and
  ``magnopy-optimize-sd``.
* Add summary of the executed commands to the output of both ``magnopy-lswt`` and
  ``magnopy-optimize-sd``.
* Add output of magnetic field to ``magnopy-optimize-sd``.
* Add "E_0.txt" output file to ``magnopy-optimize-sd``.
* Add "E_0.txt", "E_2.txt" and "ONE_OPERATOR_TERMS.txt" output file to
  ``magnopy-optimize-sd``.
* Add parameter ``B``in ``magnopy.SpinHamiltonian.add_magnetic_field``.
* Implement :issue:`72`: ``magnopy.Convention.__str__()`` and
  ``magnopy.Convention.__repr__()``.
* Implement ``magnopy.Convention.__hash__()``.
* Implement ``when_present`` argument in  ``magnopy.SpinHamiltonian.add_1``,
  ``magnopy.SpinHamiltonian.add_21``, ``magnopy.SpinHamiltonian.add_22``,
  ``magnopy.SpinHamiltonian.add_31``, ``magnopy.SpinHamiltonian.add_32``,
  ``magnopy.SpinHamiltonian.add_33``, ``magnopy.SpinHamiltonian.add_41``,
  ``magnopy.SpinHamiltonian.add_421``, ``magnopy.SpinHamiltonian.add_422``,
  ``magnopy.SpinHamiltonian.add_43``, ``magnopy.SpinHamiltonian.add_44``.
* Implement ``spin_values`` in ``load_grogu()``, same as in ``load_tb2j()``.
* Implement :issue:`75`: ``--spglib-types`` in ``magnopy-lswt``.
* Implement ``magnopy.io.plot_dispersion``.
* Extend ``--spin-values`` for the |GROGU|_ as well in ``magnopy-optimize-sd`` and
  ``magnopy-lswt``.
* Extend hover information in ``magnopy.experimental.plot_spinham()``.

Deprecated
----------

* ``magnopy.Convention.summary`` use ``print(convention)`` or ``str(convention)`` instead.
* ``replace`` argument in ``magnopy.SpinHamiltonian.add_1``,
  ``magnopy.SpinHamiltonian.add_21``, ``magnopy.SpinHamiltonian.add_22``,
  ``magnopy.SpinHamiltonian.add_31``, ``magnopy.SpinHamiltonian.add_32``,
  ``magnopy.SpinHamiltonian.add_33``, ``magnopy.SpinHamiltonian.add_41``,
  ``magnopy.SpinHamiltonian.add_421``, ``magnopy.SpinHamiltonian.add_422``,
  ``magnopy.SpinHamiltonian.add_43``, ``magnopy.SpinHamiltonian.add_44``.
  Use ``when_present="replace"`` instead.
* ``h`` in ``magnopy.SpinHamiltonian.add_magnetic_field`` in favor of ``B``.
* ``magnopy.experimental.plot_dispersion`` use ``magnopy.io.plot_dispersion`` instead.
